import{a as e,E as a}from"./index-9JDm7yr7.js";import{E as l}from"./index-CubyMTZl.js";import{E as o}from"./index-DVtIDzx4.js";import{E as r}from"./index-B2c65Y4B.js";import{E as t}from"./index-3ycmufMx.js";import{d,c as s,a as i,r as m,a5 as u,J as n,f as p,C as c,z as f,u as g,h as V,l as b,H as j,O as v}from"./index-Bt2F3fsx.js";import{_ as x}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./castArray-DaEAnbfi.js";import"./aria-DZx3bhbH.js";import"./_baseClone-DwHx1_gd.js";import"./index-DKc9HdpN.js";import"./validator-DwGrSO6l.js";import"./index-yYjo3Bby.js";import"./vnode-D7OjJs6e.js";import"./index-BaMjeaFB.js";import"./use-dialog-C_JhW6YK.js";import"./refs-D0ZxbSzV.js";const _={class:"dialog-footer"},y=x(d({__name:"role-edit-dialog",props:{modelValue:{type:Boolean,default:!1},dialogType:{default:"add"},roleData:{default:void 0}},emits:["update:modelValue","success"],setup(d,{emit:x}){const y=d,C=x,D=s({get:()=>y.modelValue,set:e=>C("update:modelValue",e)}),h=i(),N=m({roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],roleCode:[{required:!0,message:"请输入角色编码",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],description:[{required:!0,message:"请输入角色描述",trigger:"blur"}]}),T=m({roleId:0,roleName:"",roleCode:"",description:"",createTime:"",enabled:!0});u(()=>y.modelValue,e=>{e&&w()},{immediate:!0}),u(()=>y.roleData,e=>{e&&y.modelValue&&w()},{deep:!0});const w=()=>{"edit"===y.dialogType&&y.roleData?Object.assign(T,{roleId:y.roleData.roleId,roleName:y.roleData.roleName,roleCode:y.roleData.roleCode,description:y.roleData.description,createTime:y.roleData.createTime,enabled:y.roleData.enabled}):Object.assign(T,{roleId:0,roleName:"",roleCode:"",description:"",createTime:"",enabled:!0})},E=()=>{var e;D.value=!1,null==(e=h.value)||e.resetFields()},I=()=>{return e=null,a=null,l=function*(){if(h.value)try{yield h.value.validate();const e="add"===y.dialogType?"新增成功":"修改成功";v.success(e),C("success"),E()}catch(e){}},new Promise((o,r)=>{var t=e=>{try{s(l.next(e))}catch(a){r(a)}},d=e=>{try{s(l.throw(e))}catch(a){r(a)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(t,d);s((l=l.apply(e,a)).next())});var e,a,l};return(d,s)=>{const i=l,m=a,u=o,v=e,x=r,y=t;return p(),n(y,{modelValue:g(D),"onUpdate:modelValue":s[4]||(s[4]=e=>j(D)?D.value=e:null),title:"add"===d.dialogType?"新增角色":"编辑角色",width:"30%","align-center":"",onClose:E},{footer:c(()=>[V("div",_,[f(x,{onClick:E},{default:c(()=>[...s[5]||(s[5]=[b("取消",-1)])]),_:1}),f(x,{type:"primary",onClick:I},{default:c(()=>[...s[6]||(s[6]=[b("提交",-1)])]),_:1})])]),default:c(()=>[f(v,{ref_key:"formRef",ref:h,model:g(T),rules:g(N),"label-width":"120px"},{default:c(()=>[f(m,{label:"角色名称",prop:"roleName"},{default:c(()=>[f(i,{modelValue:g(T).roleName,"onUpdate:modelValue":s[0]||(s[0]=e=>g(T).roleName=e)},null,8,["modelValue"])]),_:1}),f(m,{label:"角色编码",prop:"roleCode"},{default:c(()=>[f(i,{modelValue:g(T).roleCode,"onUpdate:modelValue":s[1]||(s[1]=e=>g(T).roleCode=e)},null,8,["modelValue"])]),_:1}),f(m,{label:"描述",prop:"description"},{default:c(()=>[f(i,{modelValue:g(T).description,"onUpdate:modelValue":s[2]||(s[2]=e=>g(T).description=e),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),f(m,{label:"启用"},{default:c(()=>[f(u,{modelValue:g(T).enabled,"onUpdate:modelValue":s[3]||(s[3]=e=>g(T).enabled=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),[["__scopeId","data-v-41d78e59"]]);export{y as default};
