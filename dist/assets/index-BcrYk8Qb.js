var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,n=(e,t)=>{for(var a in t||(t={}))s.call(t,a)&&i(e,a,t[a]);if(r)for(var a of r(t))o.call(t,a)&&i(e,a,t[a]);return e},l=(e,r)=>t(e,a(r));import{_ as p,a as u,E as m,A as d}from"./useTableColumns-BwuKCgn9.js";import{d as c,a as j,y as v,e as f,f as x,z as y,u as h,H as b,C as g,I as _,J as C,l as P,n as w,a8 as O,aP as E,O as S}from"./index-yFpGTzsr.js";import{u as T,E as k}from"./useTable-CNbZov9q.js";import{A}from"./formData-roEEsqCx.js";import{_ as z}from"./user-dialog.vue_vue_type_script_setup_true_lang-Do2WrMmR.js";import{_ as D}from"./user-search.vue_vue_type_script_setup_true_lang-zsQWTfK0.js";import{E as R}from"./index-fdAg_98Y.js";import{E as U}from"./index-CrR44_AW.js";import{a as I}from"./index-CJzd_x32.js";import{_ as V}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-Buke6wTe.js";import"./index-DO93zfDF.js";import"./aria-DZx3bhbH.js";import"./index-6xX-7Dk4.js";import"./index-B0zwy6BY.js";import"./index-BtGO7k4f.js";import"./_baseClone-DT29Da9y.js";import"./isArrayLikeObject-GHHsOzuO.js";import"./castArray-CNmYmr-F.js";import"./index-CC8M3ZFK.js";import"./index-DaXg2c4C.js";import"./index-yfFZu8ww.js";import"./index-DaZI2gtB.js";import"./refs-D5SKorsy.js";import"./vnode-CPRGOU3L.js";import"./avatar6-6Evj8BB9.js";import"./avatar10-Dom60BwY.js";import"./index-CvaBRK4B.js";import"./index-DQ40BJeM.js";import"./index-Bk_Orbxo.js";import"./use-dialog-CMniSCyr.js";import"./index-4a6d5Oml.js";import"./index-B1ikFpPp.js";import"./index-BfU-oMPN.js";import"./token-DWNpOE8r.js";import"./index-CRtJWELv.js";import"./index-2Gw3B2Q1.js";import"./cloneDeep--BnNAqKF.js";import"./index-CguFuplp.js";import"./validator-g76rXS0E.js";const B={class:"user-page art-full-height"},F=V(c(l(n({},{name:"User"}),{__name:"index",setup(e){const t=j("add"),a=j(!1),r=j({}),s=j([]),o=j({userName:void 0,userGender:void 0,userPhone:void 0,userEmail:void 0,status:"1"}),i={1:{type:"success",text:"在线"},2:{type:"info",text:"离线"}},c={1:{type:"success",text:"是"},2:{type:"info",text:"否"}},{columns:V,columnChecks:F,data:G,loading:H,pagination:N,getData:J,searchParams:L,resetSearchParams:Q,handleSizeChange:W,handleCurrentChange:X,refreshData:Y}=T({core:{apiFn:E,apiParams:n({current:1,size:20},o.value),excludeParams:[],columnsFactory:()=>[{type:"index",width:60,label:"序号"},{prop:"userName",label:"用户名",width:280},{prop:"userEmail",label:"邮箱"},{prop:"userSuperAdmin",label:"超级管理员",sortable:!0,formatter:e=>{const t=(a=e.status,c[a]||{type:"info",text:"未知"});var a;return O(U,{type:t.type},()=>t.text)}},{prop:"status",label:"状态",formatter:e=>{const t=(a=e.status,i[a]||{type:"info",text:"未知"});var a;return O(U,{type:t.type},()=>t.text)}},{prop:"createTime",label:"加入时间",sortable:!0},{prop:"createTime",label:"上次登录时间",sortable:!0},{prop:"operation",label:"操作",width:200,fixed:"right",formatter:e=>O("div",[O(d,{type:"view",onClick:()=>K(e)}),O(d,{type:"edit",onClick:()=>q("edit",e)}),O(d,{type:"more",onClick:()=>q("edit",e)})])}]},transform:{dataTransformer:e=>Array.isArray(e)?e.map((e,t)=>l(n({},e),{avatar:A[t%A.length].avatar})):[]}}),$=e=>{Object.assign(L,e),J()},q=(e,s)=>{t.value=e,r.value=s||{},w(()=>{a.value=!0})},K=e=>{I.confirm("确定要注销该用户吗？","注销用户",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(()=>{S.success("注销成功")})},M=()=>{return e=null,t=null,s=function*(){try{a.value=!1,r.value={}}catch(e){}},new Promise((a,r)=>{var o=e=>{try{n(s.next(e))}catch(t){r(t)}},i=e=>{try{n(s.throw(e))}catch(t){r(t)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,i);n((s=s.apply(e,t)).next())});var e,t,s},Z=e=>{s.value=e};return(e,s)=>{const i=R,n=k,l=p,d=u,c=m,j=v("ripple");return x(),f("div",B,[y(D,{modelValue:h(o),"onUpdate:modelValue":s[0]||(s[0]=e=>b(o)?o.value=e:null),onSearch:$,onReset:h(Q)},null,8,["modelValue","onReset"]),y(c,{class:"art-table-card",shadow:"never"},{default:g(()=>[y(l,{columns:h(F),"onUpdate:columns":s[2]||(s[2]=e=>b(F)?F.value=e:null),loading:h(H),onRefresh:h(Y)},{left:g(()=>[y(n,{wrap:""},{default:g(()=>[_((x(),C(i,{onClick:s[1]||(s[1]=e=>q("add"))},{default:g(()=>[...s[4]||(s[4]=[P("新增用户",-1)])]),_:1})),[[j]])]),_:1})]),_:1},8,["columns","loading","onRefresh"]),y(d,{loading:h(H),data:h(G),columns:h(V),pagination:h(N),onSelectionChange:Z,"onPagination:sizeChange":h(W),"onPagination:currentChange":h(X)},null,8,["loading","data","columns","pagination","onPagination:sizeChange","onPagination:currentChange"]),y(z,{visible:h(a),"onUpdate:visible":s[3]||(s[3]=e=>b(a)?a.value=e:null),type:h(t),"user-data":h(r),onSubmit:M},null,8,["visible","type","user-data"])]),_:1})])}}})),[["__scopeId","data-v-cbf7037e"]]);export{F as default};
