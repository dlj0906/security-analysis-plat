var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,n=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,d=(e,l)=>{for(var a in l||(l={}))o.call(l,a)&&n(e,a,l[a]);if(t)for(var a of t(l))u.call(l,a)&&n(e,a,l[a]);return e},s=(e,l,a)=>new Promise((t,o)=>{var u=e=>{try{d(a.next(e))}catch(l){o(l)}},n=e=>{try{d(a.throw(e))}catch(l){o(l)}},d=e=>e.done?t(e.value):Promise.resolve(e.value).then(u,n);d((a=a.apply(e,l)).next())});import{d as i,b4 as r,a as m,c as p,a5 as c,e as f,f as b,h,z as v,I as _,ab as V,u as g,i as y,m as x,aB as w,g as T,C as k,F as U,D as E,l as S,H as I,r as A,n as C,J as H,k as j,aD as B,O as N}from"./index-yFpGTzsr.js";import{E as L}from"./index-DO93zfDF.js";import{E as P}from"./index-fdAg_98Y.js";import{E as O}from"./index-DQ40BJeM.js";import{_ as M}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{a as D,E as q}from"./index-CvaBRK4B.js";import{E as $,a as z,b as F,c as R}from"./index-B1ikFpPp.js";import{E as J}from"./index-yfFZu8ww.js";import{E as W}from"./index-2Gw3B2Q1.js";import{E as G}from"./index-CguFuplp.js";const K=new Set;function Q(){const e=[];try{Array.from(document.styleSheets).forEach(l=>{try{Array.from(l.cssRules||l.rules).forEach(l=>{const a=function(e){if(!(e instanceof CSSStyleRule))return null;const{selectorText:l,style:a}=e;if(!(null==l?void 0:l.startsWith(".iconsys-"))||!l.includes("::before"))return null;const t=l.substring(1).replace("::before",""),o=a.getPropertyValue("content");if(!o)return null;const u=o.replace(/['"\\]/g,"");return{className:t,unicode:u?`&#x${X(u)};`:void 0}}(l);a&&e.push(a)})}catch(a){const e={sheet:l,error:a};K.has(e)||K.add(e)}})}catch(l){}return e}function X(e){return e?e.charCodeAt(0).toString(16).padStart(4,"0"):""}const Y={class:"icon-selector"},Z={class:"icon"},ee=["innerHTML"],le={class:"text"},ae={class:"arrow"},te={class:"icons-list"},oe=["onClick"],ue=["innerHTML"],ne={class:"dialog-footer"};var de,se;const ie=M(i((de=d({},{name:"ArtIconSelector"}),se={__name:"index",props:{iconType:{default:r.CLASS_NAME},modelValue:{default:""},text:{default:"图标选择器"},width:{default:"200px"},size:{default:"default"},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","getIcon"],setup(e,{emit:l}){const a=e,t=l,o=m(a.modelValue),u=m(!1),n=m("icons"),d=p(()=>Q());c(()=>a.modelValue,e=>{o.value=e},{immediate:!0});const s=()=>{a.disabled||(u.value=!0)},i=()=>{o.value="",t("update:modelValue",""),t("getIcon","")},A=p(()=>a.iconType);return(e,l)=>{const m=L,p=P,c=O;return b(),f("div",Y,[h("div",{class:y(["select",[e.size,{"is-disabled":e.disabled},{"has-icon":g(o)}]]),onClick:s,style:T({width:a.width})},[h("div",Z,[_(h("i",{class:y(`iconfont-sys ${g(o)}`)},null,2),[[V,a.iconType===g(r).CLASS_NAME]]),_(h("i",{class:"iconfont-sys",innerHTML:g(o)},null,8,ee),[[V,a.iconType===g(r).UNICODE]])]),h("div",le,x(a.text),1),h("div",ae,[l[3]||(l[3]=h("i",{class:"iconfont-sys arrow-icon"},"",-1)),h("i",{class:"iconfont-sys clear-icon",onClick:w(i,["stop"])},"")])],6),v(c,{title:"选择图标",width:"40%",modelValue:g(u),"onUpdate:modelValue":l[2]||(l[2]=e=>I(u)?u.value=e:null),"align-center":""},{footer:k(()=>[h("span",ne,[v(p,{onClick:l[0]||(l[0]=e=>u.value=!1)},{default:k(()=>[...l[4]||(l[4]=[S("取 消",-1)])]),_:1}),v(p,{type:"primary",onClick:l[1]||(l[1]=e=>u.value=!1)},{default:k(()=>[...l[5]||(l[5]=[S("确 定",-1)])]),_:1})])]),default:k(()=>[v(m,{height:"400px"},{default:k(()=>[_(h("ul",te,[(b(!0),f(U,null,E(g(d),e=>(b(),f("li",{key:e.className,onClick:l=>(e=>{const l=a.iconType===r.CLASS_NAME?e.className:e.unicode||"";o.value=l,u.value=!1,t("update:modelValue",l),t("getIcon",l)})(e)},[_(h("i",{class:y(`iconfont-sys ${e.className}`)},null,2),[[V,g(A)===g(r).CLASS_NAME]]),_(h("i",{class:"iconfont-sys",innerHTML:e.unicode},null,8,ue),[[V,g(A)===g(r).UNICODE]])],8,oe))),128))],512),[[V,"icons"===g(n)]])]),_:1})]),_:1},8,["modelValue"])])}}},l(de,a(se)))),[["__scopeId","data-v-ed458c36"]]),re={class:"dialog-footer"},me=i({__name:"menu-dialog",props:{visible:{type:Boolean,default:!1},editData:{},type:{default:"menu"},lockType:{type:Boolean,default:!1}},emits:["update:visible","submit"],setup(e,{emit:l}){const a=e,t=l,o=m(),u=m("menu"),n=m(!1),i=m(r.UNICODE),_=A({id:0,name:"",path:"",label:"",component:"",icon:"",isEnable:!0,sort:1,isMenu:!0,keepAlive:!0,isHide:!1,isHideTab:!1,link:"",isIframe:!1,showBadge:!1,showTextBadge:"",fixedTab:!1,activePath:"",roles:[],authName:"",authLabel:"",authIcon:"",authSort:1}),V=A({name:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],path:[{required:!0,message:"请输入路由地址",trigger:"blur"}],label:[{required:!0,message:"输入权限标识",trigger:"blur"}],component:[{required:!1,message:"请输入组件路径",trigger:"blur"}],authName:[{required:!0,message:"请输入权限名称",trigger:"blur"}],authLabel:[{required:!0,message:"请输入权限标识",trigger:"blur"}]}),y=p(()=>{const e="menu"===u.value?"菜单":"权限";return n.value?`编辑${e}`:`新建${e}`}),x=p(()=>!!n.value||!(n.value||"menu"!==u.value||!a.lockType)),w=p({get:()=>_.roles.join(","),set:e=>{_.roles=e?e.split(",").map(e=>e.trim()).filter(e=>e):[]}}),T=()=>s(null,null,function*(){o.value&&(yield o.value.validate(e=>s(null,null,function*(){if(e)try{t("submit",d({},_)),N.success((n.value?"编辑":"新增")+"成功"),E()}catch(l){N.error((n.value?"编辑":"新增")+"失败")}})))}),E=()=>{t("update:visible",!1)},L=()=>{var e;null==(e=o.value)||e.resetFields(),Object.assign(_,{id:0,name:"",path:"",label:"",component:"",icon:"",isEnable:!0,sort:1,isMenu:!0,keepAlive:!0,isHide:!1,isHideTab:!1,link:"",isIframe:!1,showBadge:!1,showTextBadge:"",fixedTab:!1,activePath:"",roles:[],authName:"",authLabel:"",authIcon:"",authSort:1}),n.value=!1};return c(()=>a.visible,e=>{e&&(u.value=a.type,C(()=>{a.editData&&(()=>{var e,l,t,o,d,s,i,r,m,p,c,f,b,h,v,V,g,y,x,w,T,k,U;if(a.editData)if(n.value=!0,"menu"===u.value){const u=a.editData;_.id=u.id||0,_.name=B((null==(e=u.meta)?void 0:e.title)||""),_.path=u.path||"",_.label=u.name||"",_.component=u.component||"",_.icon=(null==(l=u.meta)?void 0:l.icon)||"",_.sort=(null==(t=u.meta)?void 0:t.sort)||1,_.isMenu=null==(d=null==(o=u.meta)?void 0:o.isMenu)||d,_.keepAlive=null!=(i=null==(s=u.meta)?void 0:s.keepAlive)&&i,_.isHide=null!=(m=null==(r=u.meta)?void 0:r.isHide)&&m,_.isHideTab=null!=(c=null==(p=u.meta)?void 0:p.isHideTab)&&c,_.isEnable=null==(b=null==(f=u.meta)?void 0:f.isEnable)||b,_.link=(null==(h=u.meta)?void 0:h.link)||"",_.isIframe=null!=(V=null==(v=u.meta)?void 0:v.isIframe)&&V,_.showBadge=null!=(y=null==(g=u.meta)?void 0:g.showBadge)&&y,_.showTextBadge=(null==(x=u.meta)?void 0:x.showTextBadge)||"",_.fixedTab=null!=(T=null==(w=u.meta)?void 0:w.fixedTab)&&T,_.activePath=(null==(k=u.meta)?void 0:k.activePath)||"",_.roles=(null==(U=u.meta)?void 0:U.roles)||[]}else{const e=a.editData;_.authName=e.title||"",_.authLabel=e.authMark||"",_.authIcon=e.icon||"",_.authSort=e.sort||1}})()}))}),c(()=>a.type,e=>{a.visible&&(u.value=e)}),(e,l)=>{const a=z,t=$,n=q,d=J,s=R,r=F,m=ie,p=W,c=G,A=D,C=P,B=O;return b(),H(B,{title:g(y),"model-value":e.visible,"onUpdate:modelValue":E,width:"800px","align-center":"",class:"menu-dialog",onClosed:L},{footer:k(()=>[h("span",re,[v(C,{onClick:E},{default:k(()=>[...l[23]||(l[23]=[S("取 消",-1)])]),_:1}),v(C,{type:"primary",onClick:T},{default:k(()=>[...l[24]||(l[24]=[S("确 定",-1)])]),_:1})])]),default:k(()=>[v(A,{ref_key:"formRef",ref:o,model:g(_),rules:g(V),"label-width":"85px"},{default:k(()=>[v(n,{label:"菜单类型"},{default:k(()=>[v(t,{modelValue:g(u),"onUpdate:modelValue":l[0]||(l[0]=e=>I(u)?u.value=e:null),disabled:g(x)},{default:k(()=>[v(a,{value:"menu",label:"menu"},{default:k(()=>[...l[21]||(l[21]=[S("菜单",-1)])]),_:1}),v(a,{value:"button",label:"button"},{default:k(()=>[...l[22]||(l[22]=[S("权限",-1)])]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1}),"menu"===g(u)?(b(),f(U,{key:0},[v(r,{gutter:20},{default:k(()=>[v(s,{span:12},{default:k(()=>[v(n,{label:"菜单名称",prop:"name"},{default:k(()=>[v(d,{modelValue:g(_).name,"onUpdate:modelValue":l[1]||(l[1]=e=>g(_).name=e),placeholder:"菜单名称"},null,8,["modelValue"])]),_:1})]),_:1}),v(s,{span:12},{default:k(()=>[v(n,{label:"路由地址",prop:"path"},{default:k(()=>[v(d,{modelValue:g(_).path,"onUpdate:modelValue":l[2]||(l[2]=e=>g(_).path=e),placeholder:"路由地址"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),v(r,{gutter:20},{default:k(()=>[v(s,{span:12},{default:k(()=>[v(n,{label:"权限标识",prop:"label"},{default:k(()=>[v(d,{modelValue:g(_).label,"onUpdate:modelValue":l[3]||(l[3]=e=>g(_).label=e),placeholder:"权限标识"},null,8,["modelValue"])]),_:1})]),_:1}),v(s,{span:12},{default:k(()=>[v(n,{label:"组件路径",prop:"component"},{default:k(()=>[v(d,{modelValue:g(_).component,"onUpdate:modelValue":l[4]||(l[4]=e=>g(_).component=e),placeholder:"组件路径"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),v(r,{gutter:20},{default:k(()=>[v(s,{span:12},{default:k(()=>[v(n,{label:"图标",prop:"icon"},{default:k(()=>[v(m,{modelValue:g(_).icon,"onUpdate:modelValue":l[5]||(l[5]=e=>g(_).icon=e),iconType:g(i),width:"100%"},null,8,["modelValue","iconType"])]),_:1})]),_:1}),v(s,{span:12},{default:k(()=>[v(n,{label:"角色权限",prop:"roles"},{default:k(()=>[v(d,{modelValue:g(w),"onUpdate:modelValue":l[6]||(l[6]=e=>I(w)?w.value=e:null),placeholder:"角色权限，多个用逗号分隔"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),v(r,{gutter:20},{default:k(()=>[v(s,{span:12},{default:k(()=>[v(n,{label:"菜单排序",prop:"sort"},{default:k(()=>[v(p,{modelValue:g(_).sort,"onUpdate:modelValue":l[7]||(l[7]=e=>g(_).sort=e),style:{width:"100%"},min:1,"controls-position":"right"},null,8,["modelValue"])]),_:1})]),_:1}),v(s,{span:12},{default:k(()=>[v(n,{label:"外部链接",prop:"link"},{default:k(()=>[v(d,{modelValue:g(_).link,"onUpdate:modelValue":l[8]||(l[8]=e=>g(_).link=e),placeholder:"外部链接/内嵌地址(https://www.baidu.com)"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),v(r,{gutter:20},{default:k(()=>[v(s,{span:12},{default:k(()=>[v(n,{label:"文本徽章",prop:"showTextBadge"},{default:k(()=>[v(d,{modelValue:g(_).showTextBadge,"onUpdate:modelValue":l[9]||(l[9]=e=>g(_).showTextBadge=e),placeholder:"文本徽章内容"},null,8,["modelValue"])]),_:1})]),_:1}),v(s,{span:12},{default:k(()=>[v(n,{label:"激活路径",prop:"activePath"},{default:k(()=>[v(d,{modelValue:g(_).activePath,"onUpdate:modelValue":l[10]||(l[10]=e=>g(_).activePath=e),placeholder:"详情页激活选中的菜单路径"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),v(r,{gutter:20},{default:k(()=>[v(s,{span:6},{default:k(()=>[v(n,{label:"是否启用",prop:"isEnable"},{default:k(()=>[v(c,{modelValue:g(_).isEnable,"onUpdate:modelValue":l[11]||(l[11]=e=>g(_).isEnable=e)},null,8,["modelValue"])]),_:1})]),_:1}),v(s,{span:6},{default:k(()=>[v(n,{label:"页面缓存",prop:"keepAlive"},{default:k(()=>[v(c,{modelValue:g(_).keepAlive,"onUpdate:modelValue":l[12]||(l[12]=e=>g(_).keepAlive=e)},null,8,["modelValue"])]),_:1})]),_:1}),v(s,{span:6},{default:k(()=>[v(n,{label:"隐藏菜单",prop:"isHide"},{default:k(()=>[v(c,{modelValue:g(_).isHide,"onUpdate:modelValue":l[13]||(l[13]=e=>g(_).isHide=e)},null,8,["modelValue"])]),_:1})]),_:1}),v(s,{span:6},{default:k(()=>[v(n,{label:"是否内嵌",prop:"isIframe"},{default:k(()=>[v(c,{modelValue:g(_).isIframe,"onUpdate:modelValue":l[14]||(l[14]=e=>g(_).isIframe=e)},null,8,["modelValue"])]),_:1})]),_:1}),v(s,{span:6},{default:k(()=>[v(n,{label:"显示徽章",prop:"showBadge"},{default:k(()=>[v(c,{modelValue:g(_).showBadge,"onUpdate:modelValue":l[15]||(l[15]=e=>g(_).showBadge=e)},null,8,["modelValue"])]),_:1})]),_:1}),v(s,{span:6},{default:k(()=>[v(n,{label:"固定标签",prop:"fixedTab"},{default:k(()=>[v(c,{modelValue:g(_).fixedTab,"onUpdate:modelValue":l[16]||(l[16]=e=>g(_).fixedTab=e)},null,8,["modelValue"])]),_:1})]),_:1}),v(s,{span:6},{default:k(()=>[v(n,{label:"标签隐藏",prop:"isHideTab"},{default:k(()=>[v(c,{modelValue:g(_).isHideTab,"onUpdate:modelValue":l[17]||(l[17]=e=>g(_).isHideTab=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})],64)):j("",!0),"button"===g(u)?(b(),f(U,{key:1},[v(r,{gutter:20},{default:k(()=>[v(s,{span:12},{default:k(()=>[v(n,{label:"权限名称",prop:"authName"},{default:k(()=>[v(d,{modelValue:g(_).authName,"onUpdate:modelValue":l[18]||(l[18]=e=>g(_).authName=e),placeholder:"权限名称"},null,8,["modelValue"])]),_:1})]),_:1}),v(s,{span:12},{default:k(()=>[v(n,{label:"权限标识",prop:"authLabel"},{default:k(()=>[v(d,{modelValue:g(_).authLabel,"onUpdate:modelValue":l[19]||(l[19]=e=>g(_).authLabel=e),placeholder:"权限标识"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),v(r,{gutter:20},{default:k(()=>[v(s,{span:12},{default:k(()=>[v(n,{label:"权限排序",prop:"authSort"},{default:k(()=>[v(p,{modelValue:g(_).authSort,"onUpdate:modelValue":l[20]||(l[20]=e=>g(_).authSort=e),style:{width:"100%"},min:1,"controls-position":"right"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})],64)):j("",!0)]),_:1},8,["model","rules"])]),_:1},8,["title","model-value"])}}});export{me as _};
