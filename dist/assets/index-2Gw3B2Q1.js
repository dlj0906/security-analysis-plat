var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,u=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,i=(e,a)=>{for(var t in a||(a={}))r.call(a,t)&&u(e,t,a[t]);if(l)for(var t of l(a))n.call(a,t)&&u(e,t,a[t]);return e},s=(e,l)=>a(e,t(l));import{aU as o,b8 as d,ag as c,a0 as m,ai as p,bz as v,_ as b,d as f,aW as y,V as N,a as g,r as x,c as V,a4 as E,a5 as h,o as I,bH as S,e as w,f as A,I as _,k as F,z as O,u as j,K as k,i as M,j as $,C as B,J as D,a2 as P,cU as z,aa as C,bF as K,cV as T,b3 as L,aB as G,a9 as R,U,ao as X}from"./index-yFpGTzsr.js";import{E as H}from"./index-yfFZu8ww.js";import{u as J}from"./index-6xX-7Dk4.js";import{U as W,I as q,C as Q,a as Y,d as Z}from"./aria-DZx3bhbH.js";import{d as ee,c as ae,u as te}from"./index-fdAg_98Y.js";const le=100,re=600,ne={beforeMount(e,a){const t=a.value,{interval:l=le,delay:r=re}=o(t)?{}:t;let n,u;const i=()=>o(t)?t():t.handler(),s=()=>{u&&(clearTimeout(u),u=void 0),n&&(clearInterval(n),n=void 0)};e.addEventListener("mousedown",e=>{0===e.button&&(s(),i(),document.addEventListener("mouseup",()=>s(),{once:!0}),u=setTimeout(()=>{n=setInterval(()=>{i()},l)},r))})}},ue=m(s(i({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.MAX_SAFE_INTEGER},min:{type:Number,default:Number.MIN_SAFE_INTEGER},modelValue:{type:[Number,null]},readonly:Boolean,disabled:Boolean,size:v,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>null===e||d(e)||["min","max"].includes(e),default:null},name:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0}},J(["ariaLabel"])),{inputmode:{type:p(String),default:void 0},align:{type:p(String),default:"center"},disabledScientific:Boolean})),ie={[Q]:(e,a)=>a!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[q]:e=>d(e)||c(e),[W]:e=>d(e)||c(e)},se=f({name:"ElInputNumber"});const oe=X(b(f(s(i({},se),{props:ue,emits:ie,setup(e,{expose:a,emit:t}){const l=e,{t:r}=y(),n=N("input-number"),u=g(),i=x({currentValue:l.modelValue,userInput:null}),{formItem:s}=ee(),o=V(()=>d(l.modelValue)&&l.modelValue<=l.min),m=V(()=>d(l.modelValue)&&l.modelValue>=l.max),p=V(()=>{const e=le(l.step);return E(l.precision)?Math.max(le(l.modelValue),e):(l.precision,l.precision)}),v=V(()=>l.controls&&"right"===l.controlsPosition),b=ae(),f=te(),X=V(()=>{if(null!==i.userInput)return i.userInput;let e=i.currentValue;if(c(e))return"";if(d(e)){if(Number.isNaN(e))return"";E(l.precision)||(e=e.toFixed(l.precision))}return e}),J=(e,a)=>{if(E(a)&&(a=p.value),0===a)return Math.round(e);let t=String(e);const l=t.indexOf(".");if(-1===l)return e;if(!t.replace(".","").split("")[l+a])return e;const r=t.length;return"5"===t.charAt(r-1)&&(t=`${t.slice(0,Math.max(0,r-1))}6`),Number.parseFloat(Number(t).toFixed(a))},le=e=>{if(c(e))return 0;const a=e.toString(),t=a.indexOf(".");let l=0;return-1!==t&&(l=a.length-t-1),l},re=(e,a=1)=>d(e)?e>=Number.MAX_SAFE_INTEGER&&1===a||e<=Number.MIN_SAFE_INTEGER&&-1===a?e:J(e+l.step*a):i.currentValue,ue=e=>{var a;const t=e;if(l.disabledScientific&&["e","E"].includes(t.key))return void t.preventDefault();const r={[U.up]:()=>{t.preventDefault(),ie()},[U.down]:()=>{t.preventDefault(),se()}};null==(a=r[t.key])||a.call(r)},ie=()=>{if(l.readonly||f.value||m.value)return;const e=Number(X.value)||0,a=re(e);de(a),t(q,i.currentValue),be()},se=()=>{if(l.readonly||f.value||o.value)return;const e=Number(X.value)||0,a=re(e,-1);de(a),t(q,i.currentValue),be()},oe=(e,a)=>{const{max:r,min:n,step:u,precision:i,stepStrictly:s,valueOnClear:o}=l;r<n&&Y("InputNumber","min should not be greater than max.");let d=Number(e);if(c(e)||Number.isNaN(d))return null;if(""===e){if(null===o)return null;d=R(o)?{min:n,max:r}[o]:o}return s&&(d=J(Math.round(d/u)*u,i),d!==e&&a&&t(W,d)),E(i)||(d=J(d,i)),(d>r||d<n)&&(d=d>r?r:n,a&&t(W,d)),d},de=(e,a=!0)=>{var r;const n=i.currentValue,u=oe(e);a?n===u&&e||(i.userInput=null,t(W,u),n!==u&&t(Q,u,n),l.validateEvent&&(null==(r=null==s?void 0:s.validate)||r.call(s,"change").catch(e=>Z())),i.currentValue=u):t(W,u)},ce=e=>{i.userInput=e;const a=""===e?null:Number(e);t(q,a),de(a,!1)},me=e=>{const a=""!==e?Number(e):"";(d(a)&&!Number.isNaN(a)||""===e)&&de(a),be(),i.userInput=null},pe=e=>{t("focus",e)},ve=e=>{var a,r;i.userInput=null,null===i.currentValue&&(null==(a=u.value)?void 0:a.input)&&(u.value.input.value=""),t("blur",e),l.validateEvent&&(null==(r=null==s?void 0:s.validate)||r.call(s,"blur").catch(e=>Z()))},be=()=>{i.currentValue!==l.modelValue&&(i.currentValue=l.modelValue)},fe=e=>{document.activeElement===e.target&&e.preventDefault()};return h(()=>l.modelValue,(e,a)=>{const t=oe(e,!0);null===i.userInput&&t!==a&&(i.currentValue=t)},{immediate:!0}),h(()=>l.precision,()=>{i.currentValue=oe(l.modelValue)}),I(()=>{var e;const{min:a,max:r,modelValue:n}=l,s=null==(e=u.value)?void 0:e.input;if(s.setAttribute("role","spinbutton"),Number.isFinite(r)?s.setAttribute("aria-valuemax",String(r)):s.removeAttribute("aria-valuemax"),Number.isFinite(a)?s.setAttribute("aria-valuemin",String(a)):s.removeAttribute("aria-valuemin"),s.setAttribute("aria-valuenow",i.currentValue||0===i.currentValue?String(i.currentValue):""),s.setAttribute("aria-disabled",String(f.value)),!d(n)&&null!=n){let e=Number(n);Number.isNaN(e)&&(e=null),t(W,e)}s.addEventListener("wheel",fe,{passive:!1})}),S(()=>{var e,a;const t=null==(e=u.value)?void 0:e.input;null==t||t.setAttribute("aria-valuenow",`${null!=(a=i.currentValue)?a:""}`)}),a({focus:()=>{var e,a;null==(a=null==(e=u.value)?void 0:e.focus)||a.call(e)},blur:()=>{var e,a;null==(a=null==(e=u.value)?void 0:e.blur)||a.call(e)}}),(e,a)=>(A(),w("div",{class:M([j(n).b(),j(n).m(j(b)),j(n).is("disabled",j(f)),j(n).is("without-controls",!e.controls),j(n).is("controls-right",j(v)),j(n).is(e.align,!!e.align)]),onDragstart:G(()=>{},["prevent"])},[e.controls?_((A(),w("span",{key:0,role:"button","aria-label":j(r)("el.inputNumber.decrease"),class:M([j(n).e("decrease"),j(n).is("disabled",j(o))]),onKeydown:k(se,["enter"])},[$(e.$slots,"decrease-icon",{},()=>[O(j(C),null,{default:B(()=>[j(v)?(A(),D(j(P),{key:0})):(A(),D(j(z),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[j(ne),se]]):F("v-if",!0),e.controls?_((A(),w("span",{key:1,role:"button","aria-label":j(r)("el.inputNumber.increase"),class:M([j(n).e("increase"),j(n).is("disabled",j(m))]),onKeydown:k(ie,["enter"])},[$(e.$slots,"increase-icon",{},()=>[O(j(C),null,{default:B(()=>[j(v)?(A(),D(j(K),{key:0})):(A(),D(j(T),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[j(ne),ie]]):F("v-if",!0),O(j(H),{id:e.id,ref_key:"input",ref:u,type:"number",step:e.step,"model-value":j(X),placeholder:e.placeholder,readonly:e.readonly,disabled:j(f),size:j(b),max:e.max,min:e.min,name:e.name,"aria-label":e.ariaLabel,"validate-event":!1,inputmode:e.inputmode,onKeydown:ue,onBlur:ve,onFocus:pe,onInput:ce,onChange:me},L({_:2},[e.$slots.prefix?{name:"prefix",fn:B(()=>[$(e.$slots,"prefix")])}:void 0,e.$slots.suffix?{name:"suffix",fn:B(()=>[$(e.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","inputmode"])],42,["onDragstart"]))}})),[["__file","input-number.vue"]]));export{oe as E,ne as v};
